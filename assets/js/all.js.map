{"version":3,"sources":["all.js"],"names":["document","addEventListener","ele","querySelector","style","cursor","pos","top","left","x","y","mouseDownHandler","e","userSelect","scrollLeft","scrollTop","clientX","clientY","mouseMoveHandler","mouseUpHandler","dx","dy","removeProperty","removeEventListener","menuOpenBtn","linkBtn","querySelectorAll","menu","menuToggle","forEach","item","closeMenu","classList","contains","remove","add","productWrap","productSelect","api_Url","shoppingCartTable","cardItemTitle","perItemCart","jsTotal","orderInfoBtn","token","wData","init","axiosGet","axios","get","then","response","data","products","console","log","renderData","err","domElement","str","length","productHTML","innerHTML","categorySelect","target","value","filterData","filter","el","category","getCart","subtotal","cartHTML","product","title","images","price","quantity","id","origin_price","cData","carts","finalTot","finalTotal","rendercData","textContent","preventDefault","addBtnClass","getAttribute","productId","num","post","alert","cartId","discardAllBtn","customerName","customerPhone","customerEmail","customerAddress","tradeWay","getOrder","headers"],"mappings":"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","file":"all.js","sourcesContent":["// ~作業預設\ndocument.addEventListener('DOMContentLoaded', function() {\n    const ele = document.querySelector('.recommendation-wall');\n    ele.style.cursor = 'grab';\n    let pos = { top: 0, left: 0, x: 0, y: 0 };\n    const mouseDownHandler = function(e) {\n        ele.style.cursor = 'grabbing';\n        ele.style.userSelect = 'none';\n\n        pos = {\n            left: ele.scrollLeft,\n            top: ele.scrollTop,\n            // Get the current mouse position\n            x: e.clientX,\n            y: e.clientY,\n        };\n\n        document.addEventListener('mousemove', mouseMoveHandler);\n        document.addEventListener('mouseup', mouseUpHandler);\n    };\n    const mouseMoveHandler = function(e) {\n        // How far the mouse has been moved\n        const dx = e.clientX - pos.x;\n        const dy = e.clientY - pos.y;\n\n        // Scroll the element\n        ele.scrollTop = pos.top - dy;\n        ele.scrollLeft = pos.left - dx;\n    };\n    const mouseUpHandler = function() {\n        ele.style.cursor = 'grab';\n        ele.style.removeProperty('user-select');\n\n        document.removeEventListener('mousemove', mouseMoveHandler);\n        document.removeEventListener('mouseup', mouseUpHandler);\n    };\n    // Attach the handler\n    ele.addEventListener('mousedown', mouseDownHandler);\n});\n// menu 切換\nlet menuOpenBtn = document.querySelector('.menuToggle');\nlet linkBtn = document.querySelectorAll('.topBar-menu a');\nlet menu = document.querySelector('.topBar-menu');\nmenuOpenBtn.addEventListener('click', menuToggle);\n\nlinkBtn.forEach((item) => {\n    item.addEventListener('click', closeMenu);\n})\n\nfunction menuToggle() {\n    if(menu.classList.contains('openMenu')) {\n        menu.classList.remove('openMenu');\n    }else {\n        menu.classList.add('openMenu');\n    }\n}\nfunction closeMenu() {\n    menu.classList.remove('openMenu');\n}\n\n// ~作業預設\n\nconst productWrap = document.querySelector('.productWrap');\nconst productSelect = document.querySelector('.productSelect');\nconst api_Url = \"https://livejs-api.hexschool.io/api/livejs/v1/customer/2022nov\";\nconst shoppingCartTable = document.querySelector('.shoppingCart-table');\nconst cardItemTitle = document.querySelector('.cardItem-title');\nconst perItemCart = document.querySelector('.perItemCart');\nconst jsTotal = document.querySelector('.js-total');\nconst orderInfoBtn = document.querySelector('.orderInfo-btn');\nconst token = \"BvRBbqadN2RAHi0hwsvYiN0VQAy1\";\n\n//axios.get資料\n\nlet wData = [];\n\ninit();\n\n//get一般product\nfunction axiosGet(){\n  axios.get(`${api_Url}/products`)\n  .then(function(response){\n    wData = response.data.products;\n    console.log(wData);\n\n    renderData(wData,productWrap);\n   \n})\n  .catch(function(err){\n    console.log(err);\n  })\n}\n\n//渲染一般product\nfunction renderData(data,domElement){\n    let str =\"\";\n    data.forEach(item =>{\n        if(data.length>0){\n        str += productHTML(item) }\n    else{\n        return \"\";\n    }\n    domElement.innerHTML = str;\n    })  \n    \n}\n\n//篩選一般product\n\nproductSelect.addEventListener('change', e =>{\n    let categorySelect = e.target.value;\n    const filterData = wData.filter(el =>{\n        return el.category === categorySelect;\n    })\n    categorySelect === \"全部\"?renderData(wData):renderData(filterData);\n})\n\n//初始化\nfunction init(){\n    axiosGet();\n    getCart();\n    productSelect.value = \"全部\";\n}\n\nlet subtotal = 0;\n//函式消除重複\nfunction cartHTML(item){\n    const {title,images,price} = item.product;\n    const {quantity, id} = item;\n    subtotal = price*quantity;\n    return `<tr class=\"perItem\"><td>\n    <div class=\"cardItem-title\">\n        <img src=\"${images}\" alt=\"\">\n        <p>${title}</p>\n    </div>\n</td>\n<td>NT$${price}</td>\n<td>${quantity}</td>\n<td class=\"subtotal\">NT$${subtotal}</td>\n<td class=\"discardBtn\">\n<a href=\"#\" class=\"material-icons\" data-id=\"${id}\"> \n    clear\n</a>\n</td></tr>`\n} //注意取用cart的id還是product的id\n\nfunction productHTML(item){\n    const {id, images, title,origin_price, price} = item;\n    return ` <li class=\"productCard\">\n    <h4 class=\"productType\">新品</h4>\n    <img src=\"${images}\" alt=\"\">\n    <a href=\"#\" class=\"addCardBtn\" data-id=\"${id}\">加入購物車</a>\n    <h3>${title}</h3>\n    <del class=\"originPrice\">NT$${origin_price}</del>\n    <p class=\"nowPrice\">NT$${price}</p>\n    </li> `\n}\n\n//get購物車carts\n\nlet cData = [];\n\nfunction getCart(){\n    axios.get(`${api_Url}/carts`)\n  .then(function(response){\n    cData = response.data.carts;\n    let finalTot = response.data.finalTotal;\n    rendercData(cData,perItemCart)\n    jsTotal.textContent = finalTot;\n  })\n  .catch(function(err){\n    console.log(err);\n  })\n}\n\n\n//渲染購物車 carts\nfunction rendercData(data,domElement){\n    let str =\"\";\n    data.forEach(item =>{\n    if(data.length>0){\n         str += cartHTML(item);  \n }\n})   \n    domElement.innerHTML = str;\n\n    console.log('渲染購物車成功');\n}\n\n//『加入購物車』按鈕的監聽//技巧：監聽整個顯示商品的ul區域，可以限制監聽行為不會莫名其妙跑到其他區塊去，一個一個綁效能很差。缺點二：萬一寫到後面有一樣的li的class名稱，監聽會套用在你沒預期的地方。\n\nproductWrap.addEventListener('click', (e) => {\n    e.preventDefault();\n    let addBtnClass = e.target.getAttribute('class');\n    if (addBtnClass !== 'addCardBtn') {\n        return\n    }\n    let productId = e.target.getAttribute('data-id');\n    let num = 1;\n    cData.forEach(item =>{\n        if(item.product.id===productId){\n            num = item.quantity +=1;\n        }else{\n            item.quantity = num;\n        }\n    })\n    console.log(num);\n    axios.post(`${api_Url}/carts`,{\n        \"data\": {\n            \"productId\": productId,\n            \"quantity\": num\n          }\n    }).then(function(response){\n        alert('加入購物車成功！')\n        getCart();\n    })\n\n})\n//『刪除單筆』按鈕的監聽//多個按鈕，往上找父層，僅綁tbody\n\nperItemCart.addEventListener('click', (e) =>{\n    e.preventDefault();\n    const cartId = e.target.getAttribute('data-id');\n    console.log(cartId);\n    if(cartId==null){\n        return;\n    }else{\n        axios.delete(`${api_Url}/carts/${cartId}`)\n        .then(function(response){\n            console.log(response);\n            alert('刪除購物車成功！')   \n            getCart();    \n        })  \n    }\n   \n})\n\nconst discardAllBtn = document.querySelector('.discardAllBtn');\n\n//『刪除全部』按鈕的監聽//單個按鈕，僅綁單個按鈕\n\ndiscardAllBtn.addEventListener('click', (e) =>{\n    e.preventDefault();\n    axios.delete(`${api_Url}/carts/`)\n        .then(function(response){\n            alert('購物車成功清空！')   \n            getCart();    \n        })\n        .catch(function(err){\n            alert('已清空，勿重複點擊');\n        })  \n    })\n\n//『送出預定資料』按鈕的監聽//單個按鈕，僅綁單個按鈕\norderInfoBtn.addEventListener('click', (e) =>{\n    e.preventDefault();\n    if(cData.length==0){\n    alert(\"購物車裡尚未有品項，請加入至少一項再送出！\");\n    return;\n    }\n    let customerName = document.querySelector('#customerName').value;\n    let customerPhone = document.querySelector('#customerPhone').value;\n    let customerEmail = document.querySelector('#customerEmail').value;\n    let customerAddress = document.querySelector('#customerAddress').value;\n    let tradeWay = document.querySelector('#tradeWay').value;\n    if(customerName==\"\"||customerPhone==\"\"|| customerAddress==\"\"|| customerEmail==\"\"){\n        alert(\"資料不全，請檢查再送出！\");\n    }\n    axios.post(`${api_Url}/orders`,{\n        \"data\": {\n          \"user\": {\n            \"name\": customerName,\n            \"tel\": customerPhone,\n            \"email\": customerEmail,\n            \"address\": customerAddress,\n            \"payment\": tradeWay\n          }\n        }\n      }).then(function(response){\n        alert('送出訂單成功！')\n        getCart();\n        customerName = \"\";\n        customerPhone = \"\";\n        customerEmail = \"\";\n        customerAddress = \"\";\n        tradeWay= \"\";\n    })\n}) \n\n//get購物車carts\n\nfunction getOrder(){\n    axios.get(`${api_Url}/orders`,{\n        headers:{\n           \"Authorization\": token\n        }\n    })\n  .then(function(response){\n    console.log(response.data);\n  })\n  .catch(function(err){\n    console.log(err);\n  })\n}\n/*async function clearAfterOrder(){\n    await  axios.post(`${api_Url}/orders`,{\n        \"data\": {\n          \"user\": {\n            \"name\": customerName,\n            \"tel\": customerPhone,\n            \"email\": customerEmail,\n            \"address\": customerAddress,\n            \"payment\": tradeWay\n          }\n        }\n      }).then(function(response){\n        alert('送出訂單成功！')\n        customerName = \"\";\n        customerPhone = \"\";\n        customerEmail = \"\";\n        customerAddress = \"\";\n        tradeWay= \"\";})\n\n    await  axios.delete(`${api_Url}/carts/`)\n      .then(function(response){\n          getCart();\n      })\n}*/\n\n  /*|| \n  addCardBtn.forEach((btn) =>{\n        btn.addEventListener('click', (e) => {\n        const idVal = e.target.getAttribute('id');\n        let num = 1;\n        //舊盲點：一直想要使用畫面上已有的元素，但沒想到依賴api的部分\n        cData.forEach((el) =>{\n            if(el.product.id===idVal){\n                console.log(\"下方車已有\");\n                num = item.quantity +=1;\n            }else{\n            console.log(\"下方車未有\");\n             let print = document.createElement('tr');\n             let lastCart = shoppingCartTable.lastChild;\n             cData.filter(item =>{\n                item.product.id === idVal;\n                print.innerHTML = cartHTML(item); \n        print.setAttribute('id',idVal);\n        shoppingCartTable.insertBefore(print,lastCart);//效能（？\n             })\n            \n            }\n        })\n    })\n  })*/\n\n\n\n\n\n\n\n\n"]}